<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Edge Sets</title>
    </head>
    <body onload=init_network()>
    <style type="text/css">#mynetwork {width: 100%; height: 1000px; border: 3px}</style>
    <div class="slidercontainer">
        <button onclick=toggle_motion()>Toggle motion</button>
        <br/>
        <label>minimum edge weight:
            <input type="range" min="0" max="1.0" value="0.5" step="0.01" class="slider" id="min_edge_weight">
            <input type="text" id="min_edge_weight_display" size="3">
        </label>
        <br/>
        <label>Edge set 1
            <input type="range" min="1" max="3" value="2" step="1.0" class="slider" id="edge_set">
            Edge set 3
        </label>
    </div>
    <div id="mynetwork"></div>
    <script type="text/javascript" src="qualifier_demo_edgesets.js"></script> 
    <!-- <script type="text/javascript" src="toy_nodes_and_edgesets.js"></script> -->
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <!-- <script type="text/javascript" src="vis-network.min.js"></script> -->
    <script type="text/javascript">
        const sign_color = {pos:"blue", neg:"red", zero:"black"}
        const options = {physics:{maxVelocity: 1, minVelocity: 0.01}}
        var edgeFilterSlider
        var mynetwork
        var motion_flag = false
        function toggle_motion(){
            motion_flag = !motion_flag
            mynetwork.setOptions( { physics: motion_flag } )
        }
        function edgesFilter(edge){ 
            return (edge.edgeset==edgeSetSlider.value) & (edge.value >= edgeFilterSlider.value) 
        }
        function init_network(){
            document.getElementById("min_edge_weight_display").value = 0.0
            document.getElementById("min_edge_weight").onchange = function(){
                document.getElementById("min_edge_weight_display").value = this.value
            }
            edgeFilterSlider = document.getElementById("min_edge_weight")
            edgeFilterSlider.addEventListener("change", (e) => {edgesView.refresh()})
            edgeSetSlider = document.getElementById("edge_set")
            edgeSetSlider.addEventListener("change", (e) => {edgesView.refresh()})
            var container = document.getElementById("mynetwork")
            var EDGE_LIST = []
            for (var i = 0; i < FULL_EDGE_LIST.length; i++) {
                var edge = FULL_EDGE_LIST[i]
                edge["value"] = Math.abs(edge["weight"])
                edge["title"] = "weight " + edge["weight"]
                edge["sign"] = (edge["weight"] < 0) ? "neg" : "pos";
                edge["color"] = {color: sign_color[edge["sign"]] };
                // edge["arrows"] = "to"
                EDGE_LIST.push(edge)
            }
            var nodes = new vis.DataSet(NODE_LIST)
            var edges = new vis.DataSet(EDGE_LIST)
            var nodesView = new vis.DataView(nodes)
            var edgesView = new vis.DataView(edges, { filter: edgesFilter })
            var data = { nodes: nodesView, edges: edgesView }
            mynetwork = new vis.Network(container, data, options)
        }
        init_network()
     </script>
    </body>
</html>
